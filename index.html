<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Robert's Rules Order Counter</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <!-- Intro / Password Gate -->
    <div id="gate" role="dialog" aria-modal="true">
      <div class="card">
        <h1>Robert‚Äôs Rules Counter</h1>
        <h2>Presented by</h2>
        <img class="logo" src="eus-logo.png" alt="EUS logo" onerror="this.style.display='none'; document.querySelector('.logo-fallback').style.display='block';">
        <div class="logo-fallback" style="display:none; font-size:2rem; font-weight:700; color:var(--eus-red); margin:20px 0;">EUS</div>
        <div class="names">Cyril El Feghali &middot; Nicolas El Murr</div>
        <div class="input-row">
          <button class="enter" id="enterBtn">Enter</button>
        </div>
        <div class="footnote"> Version 2.0 </div>
      </div>
    </div>

    <!-- App (hidden until unlocked) -->
    <div id="app" aria-hidden="true">
      <div id="notification" role="alert" aria-live="assertive"></div>
      <header>
        <button id="soundToggle" aria-label="Toggle notification sound">üîä</button>
        <h1>Robert's Rules Order Counter</h1>
        <div class="toggle-switch">
          <input type="checkbox" id="themeToggle">
          <label for="themeToggle"><span class="toggle-knob"></span></label>
        </div>
      </header>

      <main>
        <!-- Left Panel: Speakers -->
        <div class="left-panel">
          <section id="add-speaker">
            <h2>Add Speaker</h2>
            <div class="flex-container">
              <div class="column">
                <h3>Priority 1 (New Point)</h3>
                <input type="text" id="speakerName1" placeholder="Enter speaker's name" />
                <button id="addSpeakerBtn1" class="default">Add Speaker</button>
              </div>
              <div class="column">
                <h3>Priority 2 (Response)</h3>
                <input type="text" id="speakerName2" placeholder="Enter speaker's name" />
                <button id="addSpeakerBtn2" class="default">Add Speaker</button>
              </div>
            </div>
          </section>

        <section id="queue">
          <h2>Speaking Queue</h2>
          <div class="queue-container">
            <div class="column">
              <div class="queue-header">
                <h3 id="priority1-heading">Priority 1</h3>
                <button id="clearOnesBtn" class="default clear-btn" aria-label="Clear all Priority 1 speakers">Clear 1's</button>
              </div>
              <ul id="speakerList1" class="queue-list" role="list" aria-labelledby="priority1-heading" aria-live="polite"></ul>
            </div>
            <div class="column">
              <div class="queue-header">
                <h3 id="priority2-heading">Priority 2</h3>
                <button id="clearTwosBtn" class="default clear-btn" aria-label="Clear all Priority 2 speakers">Clear 2's</button>
              </div>
              <ul id="speakerList2" class="queue-list" role="list" aria-labelledby="priority2-heading" aria-live="polite"></ul>
            </div>
          </div>
          <div style="display:flex; gap:8px; margin:8px; flex-wrap:wrap;">
            <button id="nextSpeakerBtn" class="default" style="flex:2; min-width:120px;" aria-label="Move to next speaker in queue">Next Speaker</button>
            <button id="clearAllDataBtn" class="stop-btn" style="flex:1; min-width:100px;">Clear All</button>
            <button id="undoBtn" style="flex:1; min-width:80px; background:#5cb85c;" disabled aria-label="Undo last action">‚Ü∂ Undo</button>
          </div>
        </section>

        <section id="currently-speaking">
          <h2>Currently Speaking</h2>
          <div id="currentSpeakerDisplay" role="status" aria-live="assertive" aria-atomic="true">None</div>
        </section>

        <section id="session-stats" style="padding: 8px 12px;">
          <h2>Session Statistics</h2>
          <div style="display: flex; justify-content: space-around; text-align: center; margin: 0 8px;">
            <div>
              <div style="font-size: 1.8em; font-weight: bold; color: var(--eus-red);" id="totalSpeakersCount">0</div>
              <div class="stat-label">Total Speakers</div>
            </div>
            <div>
              <div style="font-size: 1.8em; font-weight: bold; color: var(--eus-red);" id="queuedSpeakersCount">0</div>
              <div class="stat-label">In Queue</div>
            </div>
          </div>
        </section>
        </div>

        <!-- Right Panel: Timers -->
        <div class="right-panel">
          <section id="timerSection1" aria-label="Timer 1 controls">
            <h2>Timer 1</h2>
            <div class="circle-container" role="timer" aria-label="Timer 1 display">
              <svg id="timerCircle1" viewBox="0 0 120 120">
                <circle class="timer-bg" cx="60" cy="60" r="50" />
                <circle class="timer-progress" cx="60" cy="60" r="50" />
                <text id="timerDisplay1" x="50%" y="50%" text-anchor="middle" dominant-baseline="middle"></text>
              </svg>
            </div>
            <!-- Add aria-labels to all buttons -->
            <div id="timerControls1">
              <button class="preset" data-seconds="30" aria-label="Set timer to 30 seconds">30 secs</button>
              <button class="preset" data-seconds="45" aria-label="Set timer to 45 seconds">45 secs</button>
              <button class="preset" data-seconds="60" aria-label="Set timer to 1 minute">1 min</button>
              <button class="preset" data-seconds="120" aria-label="Set timer to 2 minutes">2 mins</button>
              <button class="preset" data-seconds="600" aria-label="Set timer to 10 minutes">10 mins</button>
              <button class="preset" data-seconds="900" aria-label="Set timer to 15 minutes">15 mins</button>
            </div>
            <div class="custom-time-container">
              <input type="number" id="customMinutes1" placeholder="Min" min="0" aria-label="Custom minutes for timer 1"/>
              <input type="number" id="customSeconds1" placeholder="Sec" min="0" aria-label="Custom seconds for timer 1"/>
              <button id="setCustomTimeBtn1" class="default" aria-label="Set custom time for timer 1">Set</button>
            </div>
            <button id="add30SecsBtn1" class="default" style="width:100%; margin:2px;" aria-label="Add 30 seconds to timer 1">Add 30 secs</button>
            <div style="display:flex; gap:8px; flex-wrap:wrap; margin:0 4px;">
              <button id="startTimerBtn1" class="start-btn" style="flex:1;" aria-label="Start timer 1">Start</button>
              <button id="pauseTimerBtn1" class="stop-btn" style="flex:1;" aria-label="Pause timer 1">Pause</button>
              <button id="resetTimerBtn1" style="flex:1;" aria-label="Reset timer 1">Reset</button>
            </div>
          </section>


          <section id="timerSection2">
            <h2>Timer 2</h2>
            <div class="circle-container">
              <svg id="timerCircle2" viewBox="0 0 120 120">
                <circle class="timer-bg" cx="60" cy="60" r="50" />
                <circle class="timer-progress" cx="60" cy="60" r="50" />
                <text id="timerDisplay2" x="50%" y="50%" text-anchor="middle" dominant-baseline="middle"></text>
              </svg>
            </div>
            <div id="timerControls2">
              <button class="preset" data-seconds="30">30 secs</button>
              <button class="preset" data-seconds="45">45 secs</button>
              <button class="preset" data-seconds="60">1 min</button>
              <button class="preset" data-seconds="120">2 mins</button>
              <button class="preset" data-seconds="600">10 mins</button>
              <button class="preset" data-seconds="900">15 mins</button>
            </div>
            <div class="custom-time-container">
              <input type="number" id="customMinutes2" placeholder="Min" min="0"/>
              <input type="number" id="customSeconds2" placeholder="Sec" min="0"/>
              <button id="setCustomTimeBtn2" class="default">Set</button>
            </div>
            <button id="add30SecsBtn2" class="default" style="width:100%; margin:2px;">Add 30 secs</button>
            <div style="display:flex; gap:8px; flex-wrap:wrap; margin:0 4px;">
              <button id="startTimerBtn2" class="start-btn" style="flex:1;">Start</button>
              <button id="pauseTimerBtn2" class="stop-btn" style="flex:1;">Pause</button>
              <button id="resetTimerBtn2" style="flex:1;">Reset</button>
            </div>
          </section>
        </div>
      </main>
      <button id="keyboardShortcutsBtn" style="position:fixed; bottom:40px; right:10px; padding:8px 12px; background:var(--eus-gray); color:#fff; border:none; border-radius:4px; cursor:pointer; z-index:1001;" aria-label="Show keyboard shortcuts">‚å®Ô∏è Shortcuts</button>

      <div id="shortcutsModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); z-index:10001; justify-content:center; align-items:center;">
        <div style="background:#fff; padding:28px; border-radius:12px; max-width:550px; width:90%; color:#333; box-shadow: 0 10px 40px rgba(0,0,0,0.3);">
          <h2 style="margin-top:0; text-align:center; color:var(--eus-red); border-bottom:2px solid var(--eus-red); padding-bottom:12px;">Keyboard Shortcuts</h2>
          <table style="width:100%; border-collapse:collapse;">
            <tr><td style="padding:8px; border-bottom:1px solid #ddd;"><strong>Space</strong></td><td style="padding:8px; border-bottom:1px solid #ddd;">Start/Pause Timer 1</td></tr>
            <tr><td style="padding:8px; border-bottom:1px solid #ddd;"><strong>N</strong></td><td style="padding:8px; border-bottom:1px solid #ddd;">Next Speaker</td></tr>
            <tr><td style="padding:8px; border-bottom:1px solid #ddd;"><strong>R</strong></td><td style="padding:8px; border-bottom:1px solid #ddd;">Reset Timer 1</td></tr>
            <tr><td style="padding:8px; border-bottom:1px solid #ddd;"><strong>M</strong></td><td style="padding:8px; border-bottom:1px solid #ddd;">Toggle Sound</td></tr>
            <tr><td style="padding:8px; border-bottom:1px solid #ddd;"><strong>Ctrl+Z</strong></td><td style="padding:8px; border-bottom:1px solid #ddd;">Undo Last Action</td></tr>
            <tr><td style="padding:8px; border-bottom:1px solid #ddd;"><strong>1</strong></td><td style="padding:8px; border-bottom:1px solid #ddd;">Focus Priority 1 input</td></tr>
            <tr><td style="padding:8px; border-bottom:1px solid #ddd;"><strong>2</strong></td><td style="padding:8px; border-bottom:1px solid #ddd;">Focus Priority 2 input</td></tr>
            <tr><td style="padding:8px;"><strong>Esc</strong></td><td style="padding:8px;">Close this dialog</td></tr>
          </table>
          <button onclick="document.getElementById('shortcutsModal').style.display='none'" style="margin-top:16px; padding:10px 20px; background:var(--eus-red); color:#fff; border:none; border-radius:4px; cursor:pointer;">Close</button>
        </div>
      </div>

      <div id="footer">Created by: C. El Feghali &amp; N. El Murr</div>
    </div>
    <script src="script.js"></script>
  </body>
</html>